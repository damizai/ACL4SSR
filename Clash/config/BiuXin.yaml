# =============================== åŸºç¡€è®¾ç½® ===============================
port: 7890
socks-port: 7891
mixed-port: 7893
redir-port: 7892
tproxy-port: 7894
allow-lan: true
mode: rule
log-level: info
ipv6: true
unified-delay: true
tcp-concurrent: true
#external-controller: 0.0.0.0:9090
#secret: "123465."

#å¯ä»¥åŠ snifferå’Œtunè§„åˆ™


# =============================== æœºåœºè®¢é˜… ===============================
active-subs: &u_s
  use: [æ©Ÿå ´01, æ©Ÿå ´02, æ©Ÿå ´03, æ©Ÿå ´04, æ©Ÿå ´05, æ©Ÿå ´06]

all-nodes: &u
  use: [æ©Ÿå ´01, æ©Ÿå ´02, æ©Ÿå ´03, æ©Ÿå ´04, æ©Ÿå ´05, æ©Ÿå ´06, æ©Ÿå ´07, æ©Ÿå ´08]

backup-subs: &u_b
  use: [æ©Ÿå ´07, æ©Ÿå ´08] # ä¸“é—¨ä¸ºã€æ•…éšœè½¬ç§»/å¤‡ç”¨ã€‘

rtt-lb-template: &rtt-lb 
  type: url-test 
  <<: *u_s
  lazy: false
  interval: 180
  tolerance: 15

pg-template: &pg #proxy-groups
  type: select
  proxies:
    - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    - ğŸ†˜ æ•…éšœè½¬ç§»
    - è‡ªåŠ¨é€‰æ‹©
    - å°æ¹¾å‡è¡¡åŠ é€Ÿ
    - å°æ¹¾æ•…è½¬
    - é¦™æ¸¯å‡è¡¡åŠ é€Ÿ
    - æ—¥æœ¬å‡è¡¡åŠ é€Ÿ
    - ç¾å›½å‡è¡¡åŠ é€Ÿ
    - æ–°åŠ å¡å‡è¡¡åŠ é€Ÿ
    - å°æ¹¾èŠ‚ç‚¹
    - é¦™æ¸¯èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - DIRECT

# =============================== è®¢é˜…æä¾›è€… ===============================
p-common: &p-common
  type: http
  udp: true
  interval: 86400
  proxy: DIRECT
  health-check: { enable: true, url: https://cp.cloudflare.com/generate_204, interval: 600 }

proxy-providers:
  æ©Ÿå ´01:
    url: "è®¢é˜…é“¾æ¥"
    path: ./proxy_provider/sub1.yaml
    <<: *p-common
    filter: "^(?!(.*æµé‡|.*10x|.*6x|.*é‡ç½®|.*åˆ°æœŸ|.*å»ºè®®|.*å®˜ç½‘|.*Expire)).*$"
    override: { additional-prefix: "p1 Â» " }
  æ©Ÿå ´02:
    url: "è®¢é˜…é“¾æ¥"
    path: ./proxy_provider/sub2.yaml
    <<: *p-common
    filter: "^(?!(.*æµé‡|.*10x|.*6x|.*é‡ç½®|.*åˆ°æœŸ|.*å»ºè®®|.*å®˜ç½‘|.*Expire)).*$"
    override: { additional-prefix: "p2 Â» " }
  æ©Ÿå ´03:
    url: "è®¢é˜…é“¾æ¥"
    path: ./proxy_provider/sub3.yaml
    <<: *p-common
    filter: "^(?!(.*æµé‡|.*10x|.*6x|.*é‡ç½®|.*åˆ°æœŸ|.*å»ºè®®|.*å®˜ç½‘|.*Expire)).*$"
    override: { additional-prefix: "p3 Â» " }
  æ©Ÿå ´04:
    url: "è®¢é˜…é“¾æ¥"
    path: ./proxy_provider/sub3.yaml
    <<: *p-common
    filter: "^(?!(.*æµé‡|.*10x|.*6x|.*é‡ç½®|.*åˆ°æœŸ|.*å»ºè®®|.*å®˜ç½‘|.*Expire)).*$"
    override: { additional-prefix: "p4 Â» " }
  æ©Ÿå ´05:
    url: "è®¢é˜…é“¾æ¥"
    path: ./proxy_provider/sub3.yaml
    <<: *p-common
    filter: "^(?!(.*æµé‡|.*10x|.*6x|.*é‡ç½®|.*åˆ°æœŸ|.*å»ºè®®|.*å®˜ç½‘|.*Expire)).*$"
    override: { additional-prefix: "p5 Â» " }
  æ©Ÿå ´06:
    url: "è®¢é˜…é“¾æ¥"
    path: ./proxy_provider/sub3.yaml
    <<: *p-common
    filter: "^(?!(.*æµé‡|.*10x|.*6x|.*é‡ç½®|.*åˆ°æœŸ|.*å»ºè®®|.*å®˜ç½‘|.*Expire)).*$"
    override: { additional-prefix: "p6 Â» " }
  æ©Ÿå ´07:
    url: "è®¢é˜…é“¾æ¥"
    path: ./proxy_provider/sub3.yaml
    <<: *p-common
    filter: "^(?!(.*æµé‡|.*10x|.*6x|.*é‡ç½®|.*åˆ°æœŸ|.*å»ºè®®|.*å®˜ç½‘|.*Expire)).*$"
    override: { additional-prefix: "p7 Â» " }

# =============================== èŠ‚ç‚¹ä¿¡æ¯ ===============================
proxies:
  #- æœ‰è®¢é˜…é“¾æ¥å°±ä¸ç”¨å¡«è¿™é‡Œ

# =============================== DNS é…ç½® ===============================
dns:
  enable: true
  ipv6: true 
  listen: 0.0.0.0:1053
  prefer-h3: false
  respect-rules: true
  cache-algorithm: arc
  cache-size: 2048
  use-hosts: false
  use-system-hosts: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:private_domain,cn_domain"
    - "geosite:connectivity-check"
    - "geosite:private"
    - "rule-set:fake_ip_filter_DustinWin"

  default-nameserver:
    - 1.1.1.1
    - 8.8.8.8

  nameserver:
    - https://1.1.1.1/dns-query
    - https://dns.google/dns-query
    - 1.1.1.1
    - 8.8.8.8
    
  nameserver-policy:
    
    "geosite:cn,private":
      - https://223.5.5.5/dns-query
      - https://doh.pub/dns-query
      - 223.5.5.5
      - 119.29.29.29
    "geo:cn":
      - https://223.5.5.5/dns-query
      - https://doh.pub/dns-query
      - 223.5.5.5
      - 119.29.29.29
    "geosite:gfw":
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query
      - 1.1.1.1
      - 8.8.8.8
    "geosite:geolocation-!cn":
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query
      - 1.1.1.1
      - 8.8.8.8
    "RULE-SET:cn_domain":
      - 'https://223.5.5.5/dns-query'
      - 'https://doh.pub/dns-query'
      
    "RULE-SET:GeositeCN_Domain":
      - 'https://223.5.5.5/dns-query'
      - 'https://doh.pub/dns-query'

    "full-nameserver":
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query
      - 1.1.1.1
      - 8.8.8.8

  fallback:
    - 1.1.1.1
    - 8.8.8.8

  proxy-server-nameserver:
    - https://1.1.1.1/dns-query
    - https://dns.google/dns-query
    - 1.1.1.1
    - 8.8.8.8

# =============================== ä»£ç†ç»„è®¾ç½® ===============================
proxy-groups:
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: fallback #url-test
    #<<: *u_s
    proxies:
      - è‡ªåŠ¨é€‰æ‹©   # ä¼˜å…ˆçº§ 1ï¼šåªè¦è¿™é‡Œé¢è¿˜æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ´»ç€ï¼Œå°±ä¸€ç›´ç”¨è¿™é‡Œ
      - ğŸ†˜ æ•…éšœè½¬ç§»    # ä¼˜å…ˆçº§ 2ï¼šåªæœ‰å½“â€œæ—¥å¸¸èŠ‚ç‚¹â€å…¨å†›è¦†æ²¡æ—¶ï¼Œæ‰åˆ‡åˆ°è¿™é‡Œ
    url: https://cp.cloudflare.com/generate_204
    interval: 300
    tolerance: 50
    lazy: false
    icon: "https://raw.githubusercontent.com/Mithcell-Ma/icon/refs/heads/main/ai_backup.png"
      
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - AI
      - å°æ¹¾å‡è¡¡åŠ é€Ÿ
      - é¦™æ¸¯å‡è¡¡åŠ é€Ÿ
      - æ—¥æœ¬å‡è¡¡åŠ é€Ÿ
      - ç¾å›½å‡è¡¡åŠ é€Ÿ
      - æ–°åŠ å¡å‡è¡¡åŠ é€Ÿ
      - å°æ¹¾èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - å…¨éƒ¨èŠ‚ç‚¹
      - ğŸ†˜ æ•…éšœè½¬ç§»
      - DIRECT

    
  - name: ğŸ†˜ æ•…éšœè½¬ç§»
    type: url-test # ä¹Ÿå¯ä»¥ç”¨ fallback
    <<: *u_b       # ä½¿ç”¨å¤‡ç”¨è®¢é˜…åˆ—è¡¨
    url: https://cp.cloudflare.com/generate_204
    interval: 3600
    icon: "https://is1-ssl.mzstatic.com/image/thumb/Purple123/v4/77/7e/5a/777e5a23-cdcc-07e3-bac6-e691fa413307/AppIconok-0-0-1x_U007emarketing-0-0-0-10-0-85-220.png/400x400ia-75.webp"
  

  # --- AI ä¸»ç­–ç•¥ç»„ ---
  - name: AI
    type: select
    proxies: [AI_ç¨³å®šèŠ‚ç‚¹, AI_è‡ªåŠ¨ä¼˜é€‰]
    icon: "https://github.com/DustinWin/ruleset_geodata/releases/download/icons/ai.png"

  - name: AI_ç¨³å®šèŠ‚ç‚¹
    type: fallback
    <<: *u_s
    url: https://cp.cloudflare.com/generate_204
    interval: 7200
    strategy: consistent-hashing
    max-failed-times: 1
    tolerance: 100
    lazy: true
    filter: "(?i)æ—¥æœ¬|JP|é¦™æ¸¯|HK|Singapore|æ–°åŠ å¡"
    icon: "https://testingcf.jsdelivr.net/gh/aihdde/Rules@master/icon/ai.png"

  - name: AI_è‡ªåŠ¨ä¼˜é€‰
    type: url-test
    <<: *u_s
    url: https://cp.cloudflare.com/generate_204
    interval: 3600
    tolerance: 50
    lazy: false
    icon: "https://raw.githubusercontent.com/Mithcell-Ma/icon/refs/heads/main/ai_backup.png"

  # --- ğŸ§ª æ™ºèƒ½å‡è¡¡æµ‹é€Ÿç»„ ---
  - { name: å°æ¹¾å‡è¡¡åŠ é€Ÿ, <<: *rtt-lb, filter: "(?i)(å°æ¹¾|tw|ğŸ‡¹ğŸ‡¼|taiwan|æ–°åŒ—|å°ä¸­|å°åŒ—)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/available.png" }
  - { name: é¦™æ¸¯å‡è¡¡åŠ é€Ÿ, <<: *rtt-lb, filter: "(?i)(é¦™æ¸¯|hk|ğŸ‡­ğŸ‡°|hong\\s?kong)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/available.png" }
  - { name: ç¾å›½å‡è¡¡åŠ é€Ÿ, <<: *rtt-lb, filter: "(?i)(ğŸ‡ºğŸ‡¸|ç¾å›½|ç¾åœ‹|US|united\\s?states|america|usa)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/available.png" }
  - { name: æ–°åŠ å¡å‡è¡¡åŠ é€Ÿ, <<: *rtt-lb, filter: "(?i)(ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/available.png" }
  - { name: æ—¥æœ¬å‡è¡¡åŠ é€Ÿ, <<: *rtt-lb, filter: "(?i)(ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|æ±äº¬|ä¸œäº¬|å¤§é˜ª|JP|Japan)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/available.png" }

  # --- ğŸ› ï¸ æ•…éšœè½¬ç§»/æ‰‹åŠ¨é€‰æ‹©ç»„ ---
  - { name: å°æ¹¾æ•…è½¬, type: select, <<: *u_s, filter: "(?i)(å°æ¹¾|tw|ğŸ‡¹ğŸ‡¼|taiwan|æ–°åŒ—|å°ä¸­|å°åŒ—)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/asn.png" }
  - { name: é¦™æ¸¯æ•…è½¬, type: select, <<: *u_s, filter: "(?i)(é¦™æ¸¯|hk|ğŸ‡­ğŸ‡°|hong\\s?kong)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/asn.png" }
  - { name: ç¾å›½æ•…è½¬, type: select, <<: *u_s, filter: "(?i)(ğŸ‡ºğŸ‡¸|ç¾å›½|ç¾åœ‹|US|united\\s?states|america|usa)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/asn.png" }
  - { name: æ–°åŠ å¡æ•…è½¬, type: select, <<: *u_s, filter: "(?i)(ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/asn.png" }
  - { name: æ—¥æœ¬æ•…è½¬, type: select, <<: *u_s, filter: "(?i)(ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|æ±äº¬|ä¸œäº¬|å¤§é˜ª|JP|Japan)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/asn.png" }

  # --- âš¡ è‡ªåŠ¨ä¼˜é€‰ç»„ ---
  - { name: å°æ¹¾è‡ªåŠ¨, type: url-test, <<: *u_s, tolerance: 100, interval: 600, lazy: true, filter: "(?i)(å°æ¹¾|tw|ğŸ‡¹ğŸ‡¼|taiwan)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/auto.png" }
  - { name: é¦™æ¸¯è‡ªåŠ¨, type: url-test, <<: *u_s, tolerance: 100, interval: 600, lazy: true, filter: "(?i)(é¦™æ¸¯|hk|ğŸ‡­ğŸ‡°|hong\\s?kong)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/auto.png" }
  - { name: ç¾å›½è‡ªåŠ¨, type: url-test, <<: *u_s, tolerance: 100, interval: 600, lazy: true, filter: "(?i)(ğŸ‡ºğŸ‡¸|ç¾å›½|US|united\\s?states|america|usa)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/auto.png" }
  - { name: æ–°åŠ å¡è‡ªåŠ¨, type: url-test, <<: *u_s, tolerance: 100, interval: 600, lazy: true, filter: "(?i)(ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/auto.png" }
  - { name: æ—¥æœ¬è‡ªåŠ¨, type: url-test, <<: *u_s, tolerance: 100, interval: 600, lazy: true, filter: "(?i)(ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|æ±äº¬|ä¸œäº¬|å¤§é˜ª|JP|Japan)", icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/release/icon/color/auto.png" }

  - name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    <<: *u_s
    url: https://cp.cloudflare.com/generate_204
    tolerance: 50
    interval: 300
    lazy: false
    filter: "(?i)^((?!(DIRECT|Proxy|Traffic|Expire|Expired|è¿‡æœŸ|å‰©ä½™|æµé‡|å®˜ç½‘|è¶…æ—¶|timeout|å¤±æ•ˆ|Invalid|Test|æµ‹é€Ÿ|æœ¬åœ°|Local)).)*$"
    icon: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/icon/color/urltest.png"

# --- OpenAI ä¸“é¡¹ç­–ç•¥ ---
  - name: OpenAI
    type: select
    proxies: [OpenAI_ç¾å›½ä¼˜é€‰, OpenAI_å…¨çƒä¼˜é€‰, ç¾å›½æ•…è½¬, æ–°åŠ å¡æ•…è½¬]
    icon: "https://github.com/DustinWin/ruleset_geodata/releases/download/icons/openai.png"

  - name: OpenAI_ç¾å›½ä¼˜é€‰
    type: url-test
    <<: *u_s
    url: https://chatgpt.com/favicon.ico
    interval: 600
    tolerance: 50
    # ä»…ç­›é€‰ç¾å›½èŠ‚ç‚¹
    filter: "(?i)ç¾å›½|US|United States|æ´›æ‰çŸ¶|è¾¾æ‹‰æ–¯|çº½çº¦|è¥¿é›…å›¾|æ—§é‡‘å±±"
    icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png"

  - name: OpenAI_å…¨çƒä¼˜é€‰
    type: url-test
    <<: *u_s
    url: https://chatgpt.com/favicon.ico
    interval: 600
    tolerance: 50
    # ç­›é€‰ AI å‹å¥½åœ°åŒºï¼ˆç¾ã€æ–°ã€æ—¥ã€éŸ©ï¼‰ï¼Œæ’é™¤é¦™æ¸¯å’Œä¸­å›½
    filter: "(?i)ç¾å›½|US|Singapore|æ–°åŠ å¡|Japan|æ—¥æœ¬|Korea|éŸ©å›½"
    exclude-filter: "(?i)é¦™æ¸¯|HK|HongKong|CN|ä¸­å›½"
    icon: "https://testingcf.jsdelivr.net/gh/aihdde/Rules@master/icon/world.png"

  # --- Google AISTudio ä¸“é¡¹ç­–ç•¥ ---
  - name: AISTudio
    type: select
    <<: *u_s
    # æ ¸å¿ƒï¼šå½»åº•å‰”é™¤é¦™æ¸¯èŠ‚ç‚¹ï¼Œé˜²æ­¢è¢« Google å°é”
    exclude-filter: "(?i)é¦™æ¸¯|HK|HongKong|CN|ä¸­å›½|Traffic|å‰©ä½™"
    proxies: [ç¾å›½å‡è¡¡åŠ é€Ÿ, æ–°åŠ å¡å‡è¡¡åŠ é€Ÿ, æ—¥æœ¬èŠ‚ç‚¹, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]
    icon: "https://github.com/DustinWin/ruleset_geodata/releases/download/icons/google.png"
    
  # --- ğŸ“º åª’ä½“å¹³å° ---
  - { name: TikTok, type: select, proxies: [ç¾å›½å‡è¡¡åŠ é€Ÿ, å°æ¹¾å‡è¡¡åŠ é€Ÿ, æ–°åŠ å¡å‡è¡¡åŠ é€Ÿ, ç¾å›½æ•…è½¬, å°æ¹¾æ•…è½¬, æ–°åŠ å¡æ•…è½¬, ç¾å›½èŠ‚ç‚¹, æ–°åŠ å¡èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹], icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/TikTok.png" }
  - { name: YouTube, type: select, <<: *pg, icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png" }
  - { name: Netflix, type: url-test, <<: *u_s, url: https://cp.cloudflare.com/generate_204, interval: 300, tolerance: 50, filter: "(?i)^((?!(DIRECT|Proxy|Traffic|Expire|Expired|è¿‡æœŸ|å‰©ä½™|æµé‡|å®˜ç½‘|è¶…æ—¶|timeout|å¤±æ•ˆ|Invalid|Test|æµ‹é€Ÿ|æœ¬åœ°|Local)).)*$", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netflix.png" }
  - { name: Disney+, type: url-test, <<: *u_s, url: https://www.disneyplus.com/robots.txt, interval: 300, tolerance: 50, filter: "(?i)^((?!(DIRECT|Proxy|Traffic|Expire|Expired|è¿‡æœŸ|å‰©ä½™|æµé‡|å®˜ç½‘|è¶…æ—¶|timeout|å¤±æ•ˆ|Invalid|Test|æµ‹é€Ÿ|æœ¬åœ°|Local)).)*$", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Disney+.png" }
  - { name: instagram, type: url-test, <<: *u_s, url: https://cp.cloudflare.com/generate_204, interval: 300, tolerance: 50, filter: "(?i)^((?!(DIRECT|Proxy|Traffic|Expire|Expired|è¿‡æœŸ|å‰©ä½™|æµé‡|å®˜ç½‘|è¶…æ—¶|timeout|å¤±æ•ˆ|Invalid|Test|æµ‹é€Ÿ|æœ¬åœ°|Local)).)*$",exclude-filter: "(?i)é¦™æ¸¯|HK|Hong\\s?Kong|ğŸ‡­ğŸ‡°|æ–°åŠ å¡|SG|Singapore|ğŸ‡¸ğŸ‡¬", icon: "https://is1-ssl.mzstatic.com/image/thumb/PurpleSource211/v4/8a/90/50/8a905050-a62a-2c1c-a62a-dbb3c372e85d/Placeholder.mill/400x400bb-75.webp" }

  # --- ğŸŒ åŒºåŸŸèŠ‚ç‚¹ç›´é€‰ ---
  - { name: å°æ¹¾èŠ‚ç‚¹, type: select, <<: *u, include-all: true, filter: "(?i)(å°æ¹¾|tw|ğŸ‡¹ğŸ‡¼|taiwan)", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png" }
  - { name: é¦™æ¸¯èŠ‚ç‚¹, type: select, <<: *u, include-all: true, filter: "(?i)(é¦™æ¸¯|hk|ğŸ‡­ğŸ‡°|hong\\s?kong)", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png" }
  - { name: ç¾å›½èŠ‚ç‚¹, type: select, <<: *u, include-all: true, filter: "(?i)(ğŸ‡ºğŸ‡¸|ç¾å›½|US|united\\s?states|america|usa)", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png" }
  - { name: æ–°åŠ å¡èŠ‚ç‚¹, type: select, <<: *u, include-all: true, filter: "(?i)(ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore)", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png" }
  - { name: æ—¥æœ¬èŠ‚ç‚¹, type: select, <<: *u, include-all: true, filter: "(?i)(ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|æ±äº¬|ä¸œäº¬|JP|japan)", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png" }
  - { name: å…¨éƒ¨èŠ‚ç‚¹, type: select, <<: *u, include-all: true, filter: "(?i)^((?!(DIRECT|Proxy|Traffic|Expire|Expired|è¿‡æœŸ|å‰©ä½™|æµé‡|å®˜ç½‘|è¶…æ—¶|timeout|å¤±æ•ˆ|Invalid|Test|æµ‹é€Ÿ|æœ¬åœ°|Local)).)*$", icon: "https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/World_Map.png" }
  - { name: æ¼ç½‘ä¹‹é±¼, type: select, <<: *pg, icon: "https://testingcf.jsdelivr.net/gh/aihdde/Rules@master/icon/fish.png" }

# =============================== è§„åˆ™è®¾ç½® ===============================
rules:   
  - RULE-SET,AWAvenue_Ads_Rule,REJECT
  - GEOIP,cn,DIRECT,no-resolve
  #- RULE-SET,cn_ip,DIRECT,no-resolve
  - RULE-SET,telegram_ip,â™»ï¸ è‡ªåŠ¨é€‰æ‹©,no-resolve
  - RULE-SET,geoip_cloudflare,AI,no-resolve
  - RULE-SET,cn_domain,DIRECT
  
  # æ—¥æœ¬åŸŸåèµ°æ—¥æœ¬åŠ é€Ÿç»„
  #- RULE-SET,japan_domain,æ—¥æœ¬å‡è¡¡åŠ é€Ÿ
  
  # å°æ¹¾ä¸“é¡¹æµé‡
  #- RULE-SET,taiwan_domain,å°æ¹¾å‡è¡¡åŠ é€Ÿ

# --- OpenAI è§„åˆ™ (ç½®é¡¶) ---
  - DOMAIN-SUFFIX,openai.com,OpenAI
  - DOMAIN-SUFFIX,chatgpt.com,OpenAI
  - DOMAIN-SUFFIX,oaistatic.com,OpenAI
  - DOMAIN-SUFFIX,oaiusercontent.com,OpenAI
  - DOMAIN-KEYWORD,openai,OpenAI
  - DOMAIN-KEYWORD,chatgpt,OpenAI

  # --- Google AISTudio è§„åˆ™ ---
  - DOMAIN-SUFFIX,aistudio.google.com,AISTudio
  - DOMAIN-KEYWORD,aistudio,AISTudio
  - DOMAIN-KEYWORD,generativeai,AISTudio
  
  # AI ä¸“é¡¹
  - RULE-SET,ai,AI
  - DOMAIN-SUFFIX,chat.openai.com,AI
  
  # åª’ä½“ä¸“é¡¹
  - RULE-SET,youtube_domain,YouTube
  - RULE-SET,tiktok_domain,TikTok
  - RULE-SET,netflix_domain,Netflix
  - RULE-SET,disney_domain,Disney+

  # é€šç”¨è§„åˆ™
  - RULE-SET,gfw_domain,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,proxy,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - MATCH,æ¼ç½‘ä¹‹é±¼

# =============================== è§„åˆ™æä¾›è€… ===============================
rule-anchor:
  ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: mrs }
  domain: &domain { type: http, interval: 86400, behavior: domain, format: mrs }
  yaml: &yaml { type: http, interval: 86400, behavior: domain, format: yaml }

rule-providers:
  AWAvenue_Ads_Rule: { <<: *yaml, path: ./ruleset/ads.yaml, url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main//Filters/AWAvenue-Ads-Rule-Clash.yaml" }
  GeositeCN_Domain: { type : 'http'  , behavior : 'domain'  , format : 'yaml'  , url : 'https://cdn.jsdelivr.net/gh/Accademia/Additional_Rule_For_Clash@latest/GeositeCN/GeositeCN_Domain.yaml' , path : './ruleset/GeositeCN_Domain.yaml' }
  #cn_ip: { <<: *ip, path: ./ruleset/cn_ip.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs" }
  cn_domain: { type : 'http'  , behavior : 'domain'  , format : 'yaml'  , url : 'https://cdn.jsdelivr.net/gh/Accademia/Additional_Rule_For_Clash@latest/ChinaMax/ChinaMax_Domain.yaml' , path : './ruleset/ChinaMax_Domain.yaml' } 
  #cn_domain: { <<: *domain, path: ./ruleset/cn_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs" }
  fake_ip_filter_DustinWin: { <<: *domain, path: ./ruleset/fake_ip_filter_DustinWin.mrs, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/fakeip-filter.mrs" }  
  blackmatrix7_direct: { <<: *yaml, path: ./ruleset/blackmatrix7_direct.yaml, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml" }
  private_domain: { <<: *domain, path: ./ruleset/private_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs" }
  gfw_domain: { <<: *domain, path: ./ruleset/gfw_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs" }
  ai: { <<: *domain, path: ./ruleset/ai, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/ai.mrs" }
  taiwan_domain: { <<: *domain, path: ./ruleset/taiwan_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/location-tw.mrs" }
  youtube_domain: { <<: *domain, path: ./ruleset/youtube.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs" }
  tiktok_domain: { <<: *domain, path: ./ruleset/tiktok.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs" }
  netflix_domain: { <<: *domain, path: ./ruleset/netflix.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs" }
  disney_domain: { <<: *domain, path: ./ruleset/disney.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/disney.mrs" }
  telegram_ip: { <<: *ip, path: ./ruleset/tg_ip.mrs, url: "https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/mihomo-ruleset/telegramip.mrs" }
  proxy: { <<: *domain, path: ./ruleset/proxy.mrs, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/proxy.mrs" }
  geoip_cloudflare: { <<: *ip, path: ./ruleset/cf_ip.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cloudflare.mrs" }
  japan_domain: { <<: *domain, path: ./ruleset/japan_domain.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/location-jp.mrs" }
